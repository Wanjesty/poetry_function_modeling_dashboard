# poetry_function_modeling_dashboard
 - Для работы приложения требуется запустить сервисы PostgreSQL, Redis-Server
 - В базе данных создать БД django_db, пользователя django_user с паролем django_password
 - sudo service postgresql start
 - sudo service redis-server start
 - Из директории с приложением необходимо запустить Celery и сам сервер
 - poetry run celery -A function_modeling_dashboard worker -l INFO
 - poetry run python3 manage.py runserver
 - Данные для доступа в админку:
 1. Логин: admin
 2. Пароль: admin
# User story
1. Пользователь заходит в админку, видит список ранее сохраненных функций,
соответствующие графики, дату последней обработки, параметры и, а
также кнопку добавить.
2. Пользователь жмет кнопку добавить, вводит функцию в текстовом виде, а также
значение dt и interval. Введенная информация сохраняется в БД. Запиcи в БД
уникальны только по ID.
3. Приложение генерирует изображение для введенной функции и сохраняет результат в
БД. Если возникает ошибка - то сохраняется текст исключения (он выводится вместо
графика). После обработки обновляется поле дата обработки.
# System story
Приложение состоит из одного django приложения. Сценарий при добавлении новой функции
в админке:
1. Админка сохраняет инфу о функции в БД и запускает фоновую операцию генерации
изображения.
2. Запуск операции происходит через асинхронный вызов операции celery с ожиданием
результата.
3. Операция выполняется в фоновой задаче celery.task в отдельном процессе celery
worker.
4. Операция принимает в аргументах идентификатор строки с инфой о функции из БД.
5. Операция выбирает инфу о функции из БД по переданному айдишнику, генерирует
точки для графика по выбранной инфе.
6. Операция генерирует изображение по точкам и сохраняет в БД, актуализирует дату
обновления.
